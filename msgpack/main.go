package main

import (
	"fmt"
	"log"

	"github.com/vmihailenco/msgpack/v5"
)

type Item struct {
	Foo string
}

func main() {
	b, err := msgpack.Marshal(&Item{Foo: "bar"})
	if err != nil {
		panic(err)
	}

	fmt.Println(b)

	var item Item
	err = msgpack.Unmarshal(b, &item)
	if err != nil {
		panic(err)
	}
	fmt.Println(item.Foo)
	// Output: bar

	var mt map[string]interface{}
	//btt := "\xde\x00\x13\xa8BitFlags\xcf\x00\x00\x00\x00\x00\x00\x00\x17\xa9DefPsaUpf\xde\x00\x11\xaaInstanceId\xd9$2994b3a0-5ac3-4cb5-bdf9-03d5f3516866\xaaUpfInfoKey\xa19\xa7UpfType\xcc\x01\xa6SessIp\x81\xa8Ipv6Addr\x82\xa2IP\xc4\x10\x01W\x00\x00\x00\x14\b\xe0\x00\x00\x00\x00\x00\x00\x00\x00\xa4Mask\xc4\x10\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\xa8IpPoolV6\xd9aIPv6-SmfIpPool-<2994b3a0-5ac3-4cb5-bdf9-03d5f3516866>-<9>-<v5ga01int61>-v5ga01internet-<1-000007>\xadSmfIpPoolInfo\x8a\xaaUpfInfoKey\xa19\xa3Dnn\xaev5ga01internet\xa6Snssai\x82\xa3Sst\xd2\x00\x00\x00\x01\xa2Sd\xa6000007\xacCgNatProfile\xa0\xaeIpamV4PoolName\xa0\xaeIpamV6PoolName\xd9aIPv6-SmfIpPool-<2994b3a0-5ac3-4cb5-bdf9-03d5f3516866>-<9>-<v5ga01int61>-v5ga01internet-<1-000007>\xafV4StickinessTtl\xce\x00\x00\x00\x00\xafV6StickinessTtl\xce\x00\x00\x01,\xb0V4HardStickiness\xc2\xb0V6HardStickiness\xc2\xa6LFseid\x85\xa2V4\xc2\xa2V6\xc3\xa4Seid\xcf\x00\x00\x00\x00\x00/\x92\xe0\xabIpv4Address\xc0\xabIpv6Address\xc4\x10\x00\x11\x00 \x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x12\xa6RFseid\x85\xa2V4\xc2\xa2V6\xc3\xa4Seid\xcf\x00\x00\x00\t'\x83\x81 \xabIpv4Address\xc0\xabIpv6Address\xc4\x10\x00\x11\x00 \x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\xa6N4Port\xd2\x00\x00\"e\xa7DefFlow\x82\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xadDedicatedFlow\x94\xde\x00\x10\xa9QosRuleId\xcc\x01\xa5PdrUL\xce\x00\x00@\x01\xa5PdrDL\xce\x00\x00@\x02\xa5FarUL\xce@\x00\x00\x01\xa5FarDL\xce@\x00\x00\x02\xa5QerUL\xce@\x00\x00\x01\xa5QerDL\xce@\x00\x00\x02\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x92\xce@\x00\x00\x01\xce@\x00\x00\b\xadPrimaryChgUrr\xce@\x00\x00\b\xaaPrecedence\xce\x00\x00\x03\xc0\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xaaAPPLE-PUSH\xafPccRuleBaseName\xb3pcc_rulebase_static\xde\x00\x10\xa9QosRuleId\xcc\x02\xa5PdrUL\xce\x00\x00@\x03\xa5PdrDL\xce\x00\x00@\x04\xa5FarUL\xce@\x00\x00\x03\xa5FarDL\xce@\x00\x00\x04\xa5QerUL\xce@\x00\x00\x03\xa5QerDL\xce@\x00\x00\x04\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x93\xce@\x00\x00\x01\xce@\x00\x00\t\xce@\x00\x00\x11\xadPrimaryChgUrr\xce@\x00\x00\x11\xaaPrecedence\xce\x00\x00Q\"\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xa7IP-PKTS\xafPccRuleBaseName\xb3pcc_rulebase_static\xde\x00\x10\xa9QosRuleId\xcc\x03\xa5PdrUL\xce\x00\x00@\x05\xa5PdrDL\xce\x00\x00@\x06\xa5FarUL\xce@\x00\x00\x05\xa5FarDL\xce@\x00\x00\x06\xa5QerUL\xce@\x00\x00\x05\xa5QerDL\xce@\x00\x00\x06\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x93\xce@\x00\x00\x01\xce@\x00\x00\t\xce@\x00\x00\x19\xadPrimaryChgUrr\xce@\x00\x00\x19\xaaPrecedence\xce\x00\x00\x03h\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xb7MMSC-SERVER-DOMAIN-DROP\xafPccRuleBaseName\xb3pcc_rulebase_static\x8f\xa9QosRuleId\xcc\x04\xa5PdrUL\xce\x00\x00@\a\xa5PdrDL\xce\x00\x00@\b\xa5FarUL\xce@\x00\x00\a\xa5FarDL\xce@\x00\x00\b\xa5QerUL\xce@\x00\x00\a\xa5QerDL\xce@\x00\x00\b\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x92\xce@\x00\x00\x01\xce@\x00\x00\b\xadPrimaryChgUrr\xce@\x00\x00\b\xaaPrecedence\xce\x00\x00\nn\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xabPCC-Default\xa6NextId\x84\xa3Pdr\xce\x00\x00\x00\b\xa3Far\xce\x00\x00\x00\b\xa3Qer\xce\x00\x00\x00\b\xa6AdcUrr\xce\x00\x00\x00\x02\xaeN3IntfAddrType\xa6IPV4V6\xb1SupportedFeatures\xcf\x00\x00\x00\x00\x00\x01M\xf0\xadTcOffloadInfo\x80\xa5EstTs\xd3\x00\x00\x00\x00g(1\xe7\xabUrllcUpfRsc\x80\xa7SmfTeid\xce\x00\t\xc2\a\xa6PcfRef\xa73245589\xa6ChfRef\xa73245416\xaePcfReqTriggers\xcf\x00\x00\x00\x00\x00DP\r\xabPcfSuppFeat\xa40200\xbeDefaultChargingCharacteristics\xa40C00\xa4Ciot\x80\xaaTimeEvents\x81\xadSessStartTime\xd7\xffd/\xfbdg(1\xe7\xb4OriginationTimestamp\xd9!Mon, 04 Nov 2024 02:31:03.420 GMT\xb5LastActivityTimestamp\xd7\xff\xe9\x96\x87\bg(\x8b\xd0\xabIdleTimeout\xce\x00\x01Q\x80\xa6UeType\xa4HOME\xb2SessConnCountDbKey\xd9\x8aKPI-PDU-SESS,STATUS:actve,NFSETID:setxyzabc.smfset.5gc.mnc480.mcc311,DNN:v5ga01internet,RAT:EUTRA,SESSTYPE:HOME,SST:1,SD:000007,SESSION:4G\xb0NfSessCountDbKey\x84\xafPcfSessCountKey\xd94KPI-NF-SESS,PCF,f02b01eb-7c94-4102-8387-df9b4fcdc125\xafUdmSessCountKey\xd94KPI-NF-SESS,UDM,f02b01eb-7c94-4102-8387-df9b4fcdc124\xafChfSessCountKey\xd94KPI-NF-SESS,CHF,f02b01eb-7c94-4102-8387-df9b4fcdc126\xb2UpfSessCountKeySet\x81\xd94KPI-NF-SESS,UPF,2994b3a0-5ac3-4cb5-bdf9-03d5f3516866\x80\xb5SubsequentInformation\x81\xa7Binding\x80\xa6NfInfo\x89\xa9AmfCommEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9AmfEvtsEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa7AmfMtEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xb1AmfNotificationEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9UdmUecmEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v1\xaeApiFullVersion\xa51.0.2\xa8Hostport\xb3http://sim-udm-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc124\xa8UdmSdmEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v2\xaeApiFullVersion\xa52.0.1\xa8Hostport\xb3http://sim-udm-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc124\xa5PcfEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v1\xaeApiFullVersion\xa51.0.2\xa8Hostport\xb3http://sim-pcf-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc125\xa5ChfEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v2\xaeApiFullVersion\xa51.0.0\xa8Hostport\xb3http://sim-chf-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc126\xa5NefEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9UrllcInfo\x80"
	btt := "\xde\x00\x13\xa8BitFlags\xcf\x00\x00\x00\x00\x00\x00\x00\x17\xa9DefPsaUpf\xde\x00\x11\xaaInstanceId\xd9$2994b3a0-5ac3-4cb5-bdf9-03d5f3516866\xaaUpfInfoKey\xa19\xa7UpfType\xcc\x01\xa6SessIp\x81\xa8Ipv6Addr\x82\xa2IP\xc4\x10\x01W\x00\x00\x00\x14\b\xe0\x00\x00\x00\x00\x00\x00\x00\x00\xa4Mask\xc4\x10\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\xa8IpPoolV6\xd9aIPv6-SmfIpPool-<2994b3a0-5ac3-4cb5-bdf9-03d5f3516866>-<9>-<v5ga01int61>-v5ga01internet-<1-000007>\xadSmfIpPoolInfo\x8a\xaaUpfInfoKey\xa19\xa3Dnn\xaev5ga01internet\xa6Snssai\x82\xa3Sst\xd2\x00\x00\x00\x01\xa2Sd\xa6000007\xacCgNatProfile\xa0\xaeIpamV4PoolName\xa0\xaeIpamV6PoolName\xd9aIPv6-SmfIpPool-<2994b3a0-5ac3-4cb5-bdf9-03d5f3516866>-<9>-<v5ga01int61>-v5ga01internet-<1-000007>\xafV4StickinessTtl\xce\x00\x00\x00\x00\xafV6StickinessTtl\xce\x00\x00\x01,\xb0V4HardStickiness\xc2\xb0V6HardStickiness\xc2\xa6LFseid\x85\xa2V4\xc2\xa2V6\xc3\xa4Seid\xcf\x00\x00\x00\x00\x00/\x92\xe0\xabIpv4Address\xc0\xabIpv6Address\xc4\x10\x00\x11\x00 \x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x12\xa6RFseid\x85\xa2V4\xc2\xa2V6\xc3\xa4Seid\xcf\x00\x00\x00\t'\x83\x81 \xabIpv4Address\xc0\xabIpv6Address\xc4\x10\x00\x11\x00 \x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x04\xa6N4Port\xd2\x00\x00\"e\xa7DefFlow\x82\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xadDedicatedFlow\x94\xde\x00\x10\xa9QosRuleId\xcc\x01\xa5PdrUL\xce\x00\x00@\x01\xa5PdrDL\xce\x00\x00@\x02\xa5FarUL\xce@\x00\x00\x01\xa5FarDL\xce@\x00\x00\x02\xa5QerUL\xce@\x00\x00\x01\xa5QerDL\xce@\x00\x00\x02\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x92\xce@\x00\x00\x01\xce@\x00\x00\b\xadPrimaryChgUrr\xce@\x00\x00\b\xaaPrecedence\xce\x00\x00\x03\xc0\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xaaAPPLE-PUSH\xafPccRuleBaseName\xb3pcc_rulebase_static\xde\x00\x10\xa9QosRuleId\xcc\x02\xa5PdrUL\xce\x00\x00@\x03\xa5PdrDL\xce\x00\x00@\x04\xa5FarUL\xce@\x00\x00\x03\xa5FarDL\xce@\x00\x00\x04\xa5QerUL\xce@\x00\x00\x03\xa5QerDL\xce@\x00\x00\x04\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x93\xce@\x00\x00\x01\xce@\x00\x00\t\xce@\x00\x00\x11\xadPrimaryChgUrr\xce@\x00\x00\x11\xaaPrecedence\xce\x00\x00Q\"\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xa7IP-PKTS\xafPccRuleBaseName\xb3pcc_rulebase_static\xde\x00\x10\xa9QosRuleId\xcc\x03\xa5PdrUL\xce\x00\x00@\x05\xa5PdrDL\xce\x00\x00@\x06\xa5FarUL\xce@\x00\x00\x05\xa5FarDL\xce@\x00\x00\x06\xa5QerUL\xce@\x00\x00\x05\xa5QerDL\xce@\x00\x00\x06\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x93\xce@\x00\x00\x01\xce@\x00\x00\t\xce@\x00\x00\x19\xadPrimaryChgUrr\xce@\x00\x00\x19\xaaPrecedence\xce\x00\x00\x03h\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xb7MMSC-SERVER-DOMAIN-DROP\xafPccRuleBaseName\xb3pcc_rulebase_static\x8f\xa9QosRuleId\xcc\x04\xa5PdrUL\xce\x00\x00@\a\xa5PdrDL\xce\x00\x00@\b\xa5FarUL\xce@\x00\x00\a\xa5FarDL\xce@\x00\x00\b\xa5QerUL\xce@\x00\x00\a\xa5QerDL\xce@\x00\x00\b\xa8QerULDef\xce\x7f\xff\xff\xff\xa8QerDLDef\xce\x7f\xff\xff\xfe\xa7ChgUrrs\x92\xce@\x00\x00\x01\xce@\x00\x00\b\xadPrimaryChgUrr\xce@\x00\x00\b\xaaPrecedence\xce\x00\x00\nn\xa3Qfi\xcc\b\xa3Ebi\xcc\x05\xa9PccRuleId\xabPCC-Default\xa6NextId\x84\xa3Pdr\xce\x00\x00\x00\b\xa3Far\xce\x00\x00\x00\b\xa3Qer\xce\x00\x00\x00\b\xa6AdcUrr\xce\x00\x00\x00\x02\xaeN3IntfAddrType\xa6IPV4V6\xb1SupportedFeatures\xcf\x00\x00\x00\x00\x00\x01M\xf0\xadTcOffloadInfo\x80\xa5EstTs\xd3\x00\x00\x00\x00g(1\xe7\xabUrllcUpfRsc\x80\xa7SmfTeid\xce\x00\t\xc2\a\xa6PcfRef\xa73245589\xa6ChfRef\xa73245416\xaePcfReqTriggers\xcf\x00\x00\x00\x00\x00DP\r\xabPcfSuppFeat\xa40200\xbeDefaultChargingCharacteristics\xa40C00\xa4Ciot\x80\xaaTimeEvents\x81\xadSessStartTime\xd7\xffd/\xfbdg(1\xe7\xb4OriginationTimestamp\xd9!Mon, 04 Nov 2024 02:31:03.420 GMT\xb5LastActivityTimestamp\xd7\xff\xe9\x96\x87\bg(\x8b\xd0\xabIdleTimeout\xce\x00\x01Q\x80\xa6UeType\xa4HOME\xb2SessConnCountDbKey\xd9\x8aKPI-PDU-SESS,STATUS:actve,NFSETID:setxyzabc.smfset.5gc.mnc480.mcc311,DNN:v5ga01internet,RAT:EUTRA,SESSTYPE:HOME,SST:1,SD:000007,SESSION:4G\xb0NfSessCountDbKey\x84\xafPcfSessCountKey\xd94KPI-NF-SESS,PCF,f02b01eb-7c94-4102-8387-df9b4fcdc125\xafUdmSessCountKey\xd94KPI-NF-SESS,UDM,f02b01eb-7c94-4102-8387-df9b4fcdc124\xafChfSessCountKey\xd94KPI-NF-SESS,CHF,f02b01eb-7c94-4102-8387-df9b4fcdc126\xb2UpfSessCountKeySet\x81\xd94KPI-NF-SESS,UPF,2994b3a0-5ac3-4cb5-bdf9-03d5f3516866\x80\xb5SubsequentInformation\x81\xa7Binding\x80\xa6NfInfo\x89\xa9AmfCommEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9AmfEvtsEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa7AmfMtEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xb1AmfNotificationEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9UdmUecmEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v1\xaeApiFullVersion\xa51.0.2\xa8Hostport\xb3http://sim-udm-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc124\xa8UdmSdmEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v2\xaeApiFullVersion\xa52.0.1\xa8Hostport\xb3http://sim-udm-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc124\xa5PcfEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v1\xaeApiFullVersion\xa51.0.2\xa8Hostport\xb3http://sim-pcf-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc125\xa5ChfEp\x83\xa7Version\x82\xafApiVersionInUri\xa2v2\xaeApiFullVersion\xa51.0.0\xa8Hostport\xb3http://sim-chf-1:80\xacNfInstanceId\xd9$f02b01eb-7c94-4102-8387-df9b4fcdc126\xa5NefEp\x81\xa7Version\x82\xafApiVersionInUri\xa0\xaeApiFullVersion\xa0\xa9UrllcInfo\x80"
	err = msgpack.Unmarshal([]byte(btt), &mt)
	fmt.Println(mt, err)
	decodeMsgpack()
}

func decodeMsgpack() {
	// 你的 MessagePack 编码数据
	data := []byte("\x84\xa4Supi\xb4imsi-311480000120509\xa3Pei\xb7imeisv-8600100312050900\xa4Gpsi\xb5msisdn-12345000120509\xadIsUEReachable\xc3")

	// 解码数据
	var result map[string]interface{}
	err := msgpack.Unmarshal(data, &result)
	if err != nil {
		log.Fatal("msgpcack err:", err)
	}

	// 打印解码后的数据
	fmt.Printf("%+v\n", result)
}
